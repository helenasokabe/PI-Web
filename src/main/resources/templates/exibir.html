<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
    <head> 
        <title>Cadastro de Vendas</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" 
              integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous"/> 
        <link th:href="@{/css/}+'estilo.css'" rel="stylesheet" type="text/css"/>
    </head>
    <body> 
        <div class="container">
            <div class = "row">
                <img th:src="@{/images/logo6.png}" width="200" height="200" alt="Logo" class="logo"/>
            </div>
            <div class="col-sm-10" style="margin: auto">            
                <h1>Cadastro de Venda</h1>
                <form th:action="@{/addProdutoVenda}" method="post">
                    <div class="row  g-4 align-items-center">
                        <div class="col-auto">
                            <label for="nomeCli">Nome do cliente:</label>
                        </div>
                        <div class="col-auto">
                            <input type="text" id="nomeCli" class="form-control"  th:value="${cliente.nome}" disabled/>
                        </div>
                        <div class="col-auto">
                            <a th:href="@{/listaCliente}"><button type="button" class="btn btn-primary">Selecionar Cliente </button></a>
                        </div>
                        <div class="col-auto">
                            <input type="text" class="form-control" style="text-align: center"  th:value="'R$ '+${#numbers.formatDecimal(vendas.total,1,'POINT',2,'COMMA')}" disabled readonly/>
                        </div>
                    </div>                    
                    <br>
                        <div class="row  g-4 align-items-center">
                            <div class="col-auto">
                                <label for="selproduto">Produtos: </label>
                            </div>
                            <div class="col-sm-3"> 
                                <select th:name="produtoId" class="form-control" th:object="${produtos}" id="selproduto">
                                    <option th:each="prod : ${produtos}" th:value="${prod.id}" th:text="${prod.nomeproduto}"></option> 
                                </select> 
                            </div>                           
                            <div class="col-auto">
                                <label for="quant">  Quantidade: </label>
                            </div> 
                            <div class="col-auto">   
                                <input id="quant" class="form-control" type="number" min="1" value="1" name="quantidade"/>                            
                            </div>                   

                            <div class="col-auto">
                                <button type="submit" class="btn btn-primary" >Inserir Produtos</button>
                            </div>
                        </div>
                </form>

                <table class="table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Produto</th>
                            <th>Quantidade</th>
                            <th>Pre√ßo</th>
                            <th>Excluir</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="itemvenda : ${lista}">
                            <td th:text="${itemvenda.produto.id}"></td>
                            <td th:text="${itemvenda.produto.nomeproduto}"></td>
                            <td th:text="${itemvenda.quant}"></td>
                            <td th:text="${itemvenda.produto.valor}"></td>                            
                            <td><a th:href="@{'/excluirProdutoAdd?id=' +  ${itemvenda.id}}">Excluir</a></td>
                        </tr>
                    </tbody>
                </table>
                <form th:action="@{/comprar}" method="get">          
                    <div class="row g-4 align-items-center">
                        <div class="col-auto">
                            <label for="selformpagto"> Tipo de Pagamento: </label>
                        </div>                            
                        <div class="col-auto"> 
                            <select th:name="tipoPagamento" class="form-control" th:object="${vendas}" id="tipoPagamento">                                                      
                                <option value="Dinheiro" th:text="Dinheiro"></option> 
                                <option value="Credito" th:text="Credito"></option>
                                <option value="Debito" th:text="Debito"></option>
                                <option value="Pix" th:text="Pix"></option>
                            </select> 
                        </div>
                        <div class="col-auto">
                            <label for="parcela">  Parcelamento: </label>
                        </div> 
                        <div class="col-auto">   
                            <input id="parcela" class="form-control" type="number" min="1" value="1" name="parcela"/>                            
                        </div>
                        <div class="col-auto">
                            <button type="submit" class="btn btn-primary">Confirmar Venda</button>
                        </div>    
                        <div class="col-auto">    
                            <a th:href="@{/desistiu}"><button type="button" class="btn btn-dark">Voltar</button></a>
                        </div>   
                    </div> 
            </div>
        </div>        
    </body>
</html>